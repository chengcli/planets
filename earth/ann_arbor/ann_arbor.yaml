# Ann Arbor Weather Simulation Configuration
# 
# Ann Arbor is located in southeastern Michigan
# Center coordinates: approximately 42.3°N, -83.7°W
# Elevation: approximately 260-300 meters above sea level
# 
# This configuration sets up atmospheric simulation for Ann Arbor
# with a 125 km × 125 km horizontal domain and 15 km vertical extent.
# Date: November 1, 2025

geometry:
  # Must be cartesian type for atmospheric simulations
  type: cartesian
  
  # Domain bounds in meters (includes ghost zones)
  # x1 = Z direction (vertical, height above ground)
  # x2 = Y direction (north-south distance)
  # x3 = X direction (east-west distance)
  bounds:
    x1min: 0.0             # Ground level (meters)
    x1max: 15000.0         # 15 km vertical extent (top of domain)
    x2min: 0.0             # South edge (meters, including ghost)
    x2max: 125000.0        # 125 km north-south extent (including ghost)
    x3min: 0.0             # West edge (meters, including ghost)
    x3max: 125000.0        # 125 km east-west extent (including ghost)
  
  # Grid cell configuration
  # Total cells = interior cells + 2 × nghost in each direction
  cells:
    nx1: 150               # Interior cells in vertical direction
    nx2: 200               # Interior cells in north-south direction
    nx3: 200               # Interior cells in east-west direction
    nghost: 3              # Number of ghost cells on each side
  
  # Geographic center of the computational domain
  # Ann Arbor, Michigan coordinates (University of Michigan campus)
  center_latitude: 42.3    # degrees north
  center_longitude: -83.7  # degrees (negative = west, positive = east)

integration:
  # Integration parameters for atmospheric model
  # (Only start-date and end-date are used by the data fetching pipeline)
  type: rk3                # Time integration method
  cfl: 0.45                # CFL number for stability
  implicit-scheme: 0       # Explicit time integration
  nlim: -1                 # No step limit
  tlim: 43200              # 12 hour simulation time (seconds)
  
  # Date for fetching ERA5 data (YYYY-MM-DD format)
  # November 1, 2025 - Early November weather in Ann Arbor
  start-date: 2025-11-01
  end-date: 2025-11-01

forcing:
  # Gravity for hydrostatic balance calculations
  # Note: grav1 is negative because gravity points downward
  const-gravity:
    grav1: -9.80665        # m/s² (Earth's standard gravity)

# Expected pipeline output:
# 
# 1. Geographic bounds calculation:
#    - Domain size: ~125 km × ~125 km (x2 × x3)
#    - Center: 42.3°N, -83.7°W
#    - Approximate bounds: ~41.7°N to ~42.9°N, ~-84.3° to ~-83.1°
#    - With 10% buffer: ~41.6°N to ~43.0°N, ~-84.5° to ~-82.9°
#
# 2. Output directory name: e.g., 41.62N_42.98N_84.46W_82.94W/
#
# 3. Downloaded files:
#    - era5_hourly_densities_20251101.nc
#    - era5_hourly_dynamics_20251101.nc
#
# 4. After Step 2 (calculate_density.py):
#    - era5_density_20251101.nc
#
# 5. After Step 3 (regrid_era5_to_cartesian.py):
#    - regridded_ann_arbor.nc (Cartesian grid with ghost zones)
#
# 6. After Step 4 (compute_hydrostatic_pressure.py):
#    - regridded_ann_arbor.nc (augmented with hydrostatic pressure field)
#
# Usage:
#   Step 1: python fetch_era5_pipeline.py ann_arbor.yaml
#   Step 2: python calculate_density.py --input-dir ./<output_dir> --output-dir ./<output_dir>
#   Step 3: python regrid_era5_to_cartesian.py ann_arbor.yaml ./<output_dir> --output regridded_ann_arbor.nc
#   Step 4: python compute_hydrostatic_pressure.py ann_arbor.yaml regridded_ann_arbor.nc
#
# Or use the automated pipeline:
#   python download_ann_arbor_data.py
#
# Notes:
# - Ann Arbor has a humid continental climate with four distinct seasons
# - Elevation ~260-300 m means surface pressure is typically around 980-990 hPa
# - November features cooling temperatures, increasing cloudiness, and variable weather
# - Lake-effect influences from nearby Lake Erie and Lake Huron
# - Fall weather includes frequent frontal passages and first signs of winter
# - The 125 km domain captures local mesoscale features and lake influences
# - 15 km vertical extent covers the full troposphere for mid-latitude systems
# - This domain is suitable for studying:
#   * Lake-effect precipitation events
#   * Fall convective systems
#   * Synoptic-scale weather systems affecting the Great Lakes region
#   * Early season snow/rain events typical for November
